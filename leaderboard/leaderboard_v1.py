import streamlit as st
import pandas as pd
import datetime

# 학생 ID 리스트
student_ids = [
    20231837, 20211402, 20211733, 20231851, 20231852, 20231846, 20231831, 20231843,
    20230320, 20231854, 20220378, 20211168, 20210261, 20200025, 20231218, 20241901,
    20221593, 20201227, 20241909, 20211166, 20241584, 20200307, 20232241, 20220154,
    20231834, 20231842, 20211352, 20211188, 20181599, 20201608, 20201625, 20191347,
    20221931, 20201396, 20221995, 20221201, 20201638, 20200595, 20201607, 20211014,
    20201663, 20221300, 20231838, 20191666, 20191579
]

# Accuracy 점수 (예시 데이터) - 변수명: scores_accuracy_dict
scores_accuracy_dict = {
    20231837: 0.85, 20211402: 0.92, 20211733: 0.80, 20231851: 0.88, 20231852: 0.77,
    20231846: 0.75, 20231831: 0.90, 20231843: 0.84, 20230320: 0.70, 20231854: 0.79,
    20220378: 0.83, 20211168: 0.81, 20210261: 0.78, 20200025: 0.74, 20231218: 0.89,
    20241901: 0.85, 20221593: 0.73, 20201227: 0.71, 20241909: 0.82, 20211166: 0.86,
    20241584: 0.69, 20200307: 0.76, 20232241: 0.68, 20220154: 0.74, 20231834: 0.88,
    20231842: 0.80, 20211352: 0.79, 20211188: 0.72, 20181599: 0.69, 20201608: 0.67,
    20201625: 0.70, 20191347: 0.66, 20221931: 0.63, 20201396: 0.61, 20221995: 0.62,
    20221201: 0.65, 20201638: 0.60, 20200595: 0.59, 20201607: 0.64, 20211014: 0.58,
    20201663: 0.57, 20221300: 0.55, 20231838: 0.54, 20191666: 0.52, 20191579: 0.51
}
# RMSE 점수 (예시 데이터) - 변수명: scores_rmse_dict
scores_rmse_dict = {
    20231837: 0.85, 20211402: 0.92, 20211733: 0.80, 20231851: 0.88, 20231852: 0.77,
    20231846: 0.75, 20231831: 0.90, 20231843: 0.84, 20230320: 0.70, 20231854: 0.79,
    20220378: 0.83, 20211168: 0.81, 20210261: 0.78, 20200025: 0.74, 20231218: 0.89,
    20241901: 0.85, 20221593: 0.73, 20201227: 0.71, 20241909: 0.82, 20211166: 0.86,
    20241584: 0.69, 20200307: 0.76, 20232241: 0.68, 20220154: 0.74, 20231834: 0.88,
    20231842: 0.80, 20211352: 0.79, 20211188: 0.72, 20181599: 0.69, 20201608: 0.67,
    20201625: 0.70, 20191347: 0.66, 20221931: 0.63, 20201396: 0.61, 20221995: 0.62,
    20221201: 0.65, 20201638: 0.60, 20200595: 0.59, 20201607: 0.64, 20211014: 0.58,
    20201663: 0.57, 20221300: 0.55, 20231838: 0.54, 20191666: 0.52, 20191579: 0.51
}


# 자동 새로고침 안내 및 현재 시간 표시
now = datetime.datetime.now().strftime("%Y-%m-%d %H:%M:%S")
st.info(f"리더보드는 매일 오전 11시 업데이트 됩니다. (업데이트: {now})")

st.title("HW 01 Leaderboard")
st.markdown("본 리더보드는 당뇨병 및 자살 예측 모델의 My Method 성능을 평가하여 순위를 매긴 것입니다.")

# --- Accuracy 표
df_acc = pd.DataFrame({'Student_ID': student_ids})
df_acc['Accuracy'] = df_acc['Student_ID'].map(scores_accuracy_dict)
df_acc = df_acc.sort_values(by='Accuracy', ascending=False).reset_index(drop=True)
df_acc.index += 1
df_acc.index.name = 'Rank'
df_acc['Student_ID'] = df_acc['Student_ID'].astype(str)

st.subheader("Accuracy (당뇨병 예측 성능)")
st.dataframe(df_acc)

# --- RMSE 표
df_rmse = pd.DataFrame({'Student_ID': student_ids})
df_rmse['RMSE'] = df_rmse['Student_ID'].map(scores_rmse_dict)
df_rmse = df_rmse.sort_values(by='RMSE', ascending=True).reset_index(drop=True)
df_rmse.index += 1
df_rmse.index.name = 'Rank'
df_rmse['Student_ID'] = df_rmse['Student_ID'].astype(str)
df_rmse['RMSE'] = df_rmse['RMSE'].round(3)

st.subheader("RMSE (자살 예측 성능)")
st.dataframe(df_rmse)

